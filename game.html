---
layout: default
title: Game
full: true
---

<div id="gamescreen" class="game">
<div id="console"></div>
<div id="hover" class="hover">Test</div>
</div>

<script>
var console = document.getElementById('console');
var gamescreen = document.getElementById('gamescreen');
var hover = document.getElementById('hover');

var currentTimeout;

function logKey(e) {
    if (e.code == 'Space') {
        if(currentTimeout) clearTimeout( currentTimeout );
    }
}
document.addEventListener('keypress', logKey);


function mouseMove(e) {
    hover.style.left = e.clientX + "px";
    hover.style.top = e.clientY + "px";
}
gamescreen.addEventListener('mousemove', mouseMove);



function say(message) {
    var promise, ms, timeout;
    ms = Math.max(2000,message.length*125);
    console.innerHTML = message;

    promise = new Promise(function(resolve, reject) {
        timeout = setTimeout(function() {
            console.innerHTML = "";
            resolve('timeout done');
        }, ms);
    });

    currentTimeout = timeout;

    return promise;
}



async function conversation1() {
    await say("Hello");
    await say("Welcome to my game");
    await say("This is a test of talking");
}

async function conversation2() {
    await say("But wait...");
    await say("...there's more...");
    await say("...shall we talk some more?");
}

async function game() {
    await conversation1();
    await conversation2();
}

game();


</script>
